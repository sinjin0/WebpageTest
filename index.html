<html>
<head>
	<meta charset="utf-8"/>
	<title>Kakao 지도 시작하기</title>
	<style>
		html, body {width:800px;height:600px;margin:0;padding:0;} 
		.map_wrap {position:relative;overflow:hidden;width:90%;height:90%;}
		.radius_border{border:1px solid #919191;border-radius:5px;}     
		.custom_typecontrol {position:absolute;top:10px;right:10px;overflow:hidden;width:130px;height:30px;margin:0;padding:0;z-index:1;font-size:12px;font-family:'Malgun Gothic', '맑은 고딕', sans-serif;}
		.custom_typecontrol span {display:block;width:65px;height:30px;float:left;text-align:center;line-height:30px;cursor:pointer;}
		.custom_typecontrol .btn {background:#fff;background:linear-gradient(#fff,  #e6e6e6);}       
		.custom_typecontrol .btn:hover {background:#f5f5f5;background:linear-gradient(#f5f5f5,#e3e3e3);}
		.custom_typecontrol .btn:active {background:#e6e6e6;background:linear-gradient(#e6e6e6, #fff);}    
		.custom_typecontrol .selected_btn {color:#fff;background:#425470;background:linear-gradient(#425470, #5b6d8a);}
		.custom_typecontrol .selected_btn:hover {color:#fff;}   		
	</style>
</head>
<body>
	<div class="map_wrap">
		<div id="map" style="width:100%;height:100%;position:relative;overflow:hidden;"></div> 
		<div class="custom_typecontrol radius_border">
     			<span id="btnRoadmap" class="selected_btn" onclick="setMapType('roadmap')">지도</span>
       			<span id="btnSkyview" class="btn" onclick="setMapType('skyview')">스카이뷰</span>
  		</div>		
	</div>
	
	<ul>
     		<li>위도:<span id="latitude"></span></li>
      		<li>경도:<span id="longitude"></span></li>
		<Button id="centerBtn" onclick="centerButtonClick()">센터</Button>
  	</ul>
	
	<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=7f0ea57fbca0a4cadfffa7ea104b25cf"></script>
	<script>
		var container = document.getElementById('map');
		var options = {
			center: new kakao.maps.LatLng(36.393250, 127.405276),
			level: 3
		};

		var map = new kakao.maps.Map(container, options);
		var centerMarker;
		
		var start = FindLocation();
	function FindLocation() {
      		if( navigator.geolocation) {
       			navigator.geolocation.watchPosition(markingCurPosition);
      		} else {
         		  loc.innerHTML = "이 문장은 사용자의 웹 브라우저가 Geolocation API를 지원하지 않을 때 나타납니다!";
     	 	}
 	}
		
	function markingCurPosition(position) {
		var locPosition = new kakao.maps.LatLng(position.coords.latitude, position.coords.longitude);
		centerMarker.setMap(null);
		centerMarker = new kakao.maps.Marker({
			position: locPosition
		});
		centerMarker.setMap(map);
	}
		
	function centerButtonClick() {
		if( navigator.geolocation) {
       			navigator.geolocation.getCurrentPosition(setCenter);
      		} else {
         		  loc.innerHTML = "이 문장은 사용자의 웹 브라우저가 Geolocation API를 지원하지 않을 때 나타납니다!";
     	 	}
	}
		
	function setCenter(position) {
		var moveLatLon = new kakao.maps.LatLng(position.coords.latitude, position.coords.longitude);
		map.setCenter(moveLatLon);
		document.getElementById("latitude").innerHTML = position.coords.latitude;
    		document.getElementById("longitude").innerHTML = position.coords.longitude;
	}
		
	function setMapType(maptype) {
		var roadmapControl = document.getElementById('btnRoadmap');
		var skyviewControl = document.getElementById('btnSkyview');
		
		if(maptype == 'roadmap') {
			map.setMapTypeId(kakao.maps.MapTypeId.ROADMAP);
			roadmapControl.className = 'selected_btn';
			skyviewControl.className = 'btn';
		} else {
			map.setMapTypeId(kakao.maps.MapTypeId.HYBRID);
			skyviewControl.className = 'selected_btn';
			roadmapControl.className = 'btn';
		}
	
	}
		
		
	</script>
	
</body>
</html>
